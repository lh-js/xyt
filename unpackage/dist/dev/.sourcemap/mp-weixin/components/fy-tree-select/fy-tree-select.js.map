{"version":3,"sources":[null,"webpack:///D:/HBuilderProjects/CampuServicePlatform/components/fy-tree-select/fy-tree-select.vue?a81a","webpack:///D:/HBuilderProjects/CampuServicePlatform/components/fy-tree-select/fy-tree-select.vue?a655","webpack:///D:/HBuilderProjects/CampuServicePlatform/components/fy-tree-select/fy-tree-select.vue?a078","uni-app:///components/fy-tree-select/fy-tree-select.vue","webpack:///D:/HBuilderProjects/CampuServicePlatform/components/fy-tree-select/fy-tree-select.vue?d880","webpack:///D:/HBuilderProjects/CampuServicePlatform/components/fy-tree-select/fy-tree-select.vue?d9d6"],"names":[],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA2H;AAC3H;AACkE;AACL;AACc;;;AAG3E;AACsL;AACtL,gBAAgB,gMAAU;AAC1B,EAAE,oFAAM;AACR,EAAE,yFAAM;AACR,EAAE,kGAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,6FAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA,aAAa,mWAEN;AACP;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B;AAC3B;;AAEA;AACA;AACA;AACA,2BAA2B;AAC3B;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;AC9CA;AAAA;AAAA;AAAA;AAA0sB,CAAgB,utBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACkD9tB;AACA,sBADA;AAEA;AACA,qEADA,EACA;AACA,yCAFA,EAEA;;AAEA,sDAJA,EAIA;;AAEA,6CANA,EAMA;AACA,+EAPA,EAOA;AACA,+CARA,EAQA;AACA,gDATA,EASA;AACA,qDAVA,EAUA;AACA,sDAXA,EAWA;;AAEA,uEAbA,EAaA;AACA,0CAdA,EAcA;AACA,6CAfA,EAeA;AACA,4CAhBA;;AAkBA,mDAlBA,EAkBA;AACA,6CAnBA,EAmBA;AACA,4CApBA,EAoBA;AACA,kDArBA,EAqBA;;AAEA,kDAvBA,EAuBA;;AAEA,2CAzBA,EAyBA;AACA,+CA1BA,EA0BA;AACA,qDA3BA,CA2BA;AA3BA,GAFA;AA+BA,MA/BA,kBA+BA;AACA;AACA;AACA,2BADA,EACA,WADA,EACA,QADA,EACA,SADA,EACA,UADA,EACA,uCADA,EACA,mBADA,EADA;;AAIA;AACA,2BADA,EACA,SADA,EACA,UADA,EACA,WADA,EACA,mBADA,EAJA;;;AAQA,oBARA;AASA,kBATA,EASA;AACA,sBAVA;;AAYA,GA5CA;AA6CA;AACA;AACA,qBADA;AAEA;AACA;AACA;AACA;AACA,OANA,EADA,EA7CA;;;AAuDA,SAvDA,qBAuDA;AACA;AACA,GAzDA;AA0DA;AACA;AACA,QAFA,kBAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAFA,MAEA;AACA;AACA;AACA;AACA;AACA,OAXA,CAWA;AACA;AACA;AACA,KAjBA;AAkBA;AACA,cAnBA,sBAmBA,IAnBA,EAmBA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAFA,MAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,OArBA,CAqBA;AACA;AACA;AACA,KA5CA;AA6CA;;;AAGA,kBAhDA,4BAgDA;AACA;AACA,gBADA,GACA,IADA,CACA,QADA,CACA,KADA,GACA,IADA,CACA,KADA,CACA,OADA,GACA,IADA,CACA,OADA,CACA,UADA,GACA,IADA,CACA,UADA;;AAGA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OApBA,CAoBA;AACA;AACA;AACA,KAxEA;;AA0EA;;;;AAIA,YA9EA,oBA8EA,MA9EA,EA8EA,KA9EA,EA8EA;AACA;AACA,kDADA,CACA;AACA,qEAFA,CAEA;AACA,0CAHA,CAGA;;AAEA;AACA,gDANA,CAMA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,OAvBA,CAuBA;AACA,KAvGA;AAwGA;;;AAGA,uBA3GA,iCA2GA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,WAHA,MAGA;AACA;AACA;AACA;AACA;;AAEA;AACA,OAlBA,CAkBA;AACA;AACA;AACA,KAjIA;AAkIA;;;;;AAKA,oBAvIA,8BAuIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OARA,CAQA;AACA;AACA;AACA,KAnJA;AAoJA;;;;;AAKA,iBAzJA,+BAyJA;AACA;AACA;AACA,OAFA,CAEA;AACA;AACA;AACA,KA/JA;AAgKA;;;AAGA,eAnKA,uBAmKA,MAnKA,EAmKA;AACA;AACA,KArKA;AAsKA;;;AAGA,UAzKA,kBAyKA,IAzKA,EAyKA;AACA;AACA;AACA,OAFA,MAEA;AACA;AACA;AACA,KA/KA;AAgLA;;;;;;AAMA,cAtLA,sBAsLA,KAtLA,EAsLA,IAtLA,EAsLA,GAtLA,EAsLA;AACA;AACA;AACA,OAFA,CAEA;AACA;AACA;AACA,KA5LA;AA6LA;;;AAGA,kBAhMA,4BAgMA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,OArBA,CAqBA;AACA;AACA;AACA,KAzNA;AA0NA;AACA,oBA3NA,8BA2NA;AACA;AACA;AACA;AACA,KA/NA;AAgOA;;;AAGA,qBAnOA,+BAmOA;AACA;AACA;AACA,KAtOA;AAuOA;;;AAGA,oBA1OA,8BA0OA;AACA;AACA;AACA,KA7OA,EA1DA,E;;;;;;;;;;;;AClDA;AAAA;AAAA;AAAA;AAAi0C,CAAgB,kxCAAG,EAAC,C;;;;;;;;;;;ACAr1C;AACA,OAAO,KAAU,EAAE,kBAKd","file":"components/fy-tree-select/fy-tree-select.js","sourcesContent":["import { render, staticRenderFns, recyclableRender, components } from \"./fy-tree-select.vue?vue&type=template&id=9df6b9b8&\"\nvar renderjs\nimport script from \"./fy-tree-select.vue?vue&type=script&lang=js&\"\nexport * from \"./fy-tree-select.vue?vue&type=script&lang=js&\"\nimport style0 from \"./fy-tree-select.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../DCBrowserDownloads/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"components/fy-tree-select/fy-tree-select.vue\"\nexport default component.exports","export * from \"-!../../../../DCBrowserDownloads/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../DCBrowserDownloads/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../DCBrowserDownloads/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../DCBrowserDownloads/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../DCBrowserDownloads/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../DCBrowserDownloads/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./fy-tree-select.vue?vue&type=template&id=9df6b9b8&\"","var components\ntry {\n  components = {\n    uniTransition: function() {\n      return import(\n        /* webpackChunkName: \"uni_modules/uni-transition/components/uni-transition/uni-transition\" */ \"@/uni_modules/uni-transition/components/uni-transition/uni-transition.vue\"\n      )\n    }\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  if (!_vm._isMounted) {\n    _vm.e0 = function($event) {\n      $event.stopPropagation()\n      $event.preventDefault()\n      return (function() {})($event)\n    }\n\n    _vm.e1 = function($event) {\n      $event.stopPropagation()\n      $event.preventDefault()\n      return (function() {})($event)\n    }\n  }\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../DCBrowserDownloads/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../DCBrowserDownloads/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../DCBrowserDownloads/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../DCBrowserDownloads/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../DCBrowserDownloads/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./fy-tree-select.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../DCBrowserDownloads/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../DCBrowserDownloads/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../DCBrowserDownloads/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../DCBrowserDownloads/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../DCBrowserDownloads/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./fy-tree-select.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view class=\"fy-tree-select\" @touchmove.stop.prevent=\"()=>{}\">\r\n\t\t<!-- 用户自定义输入内容 -->\r\n        <view @click.stop.prevent=\"handlerOpenModal\"><slot></slot></view>\r\n\r\n\t    <uni-transition :mode-class=\"['fade']\" :styles=\"maskClass\" :duration=\"duration\" :show=\"visible\" @click=\"handlerMaskClick\" />\r\n\t\t<uni-transition :mode-class=\"['slide-bottom']\" :styles=\"transClass\" :duration=\"duration\" :show=\"visible\">\r\n\t\t\t<view class=\"fy-tree-select_wrapper\" @touchmove.stop.prevent=\"()=>{}\">\r\n\t\t\t\t<view class=\"fy-tree-select_bar\" :style=\"customBarStyle\" v-if=\"showBar\">\r\n                    <template v-if=\"$slots.bar\">\r\n                        <slot name=\"bar\"></slot>\r\n                    </template>\r\n                    <template v-else>\r\n                        <text class=\"fy-tree-select_bar__btn\" :style=\"{color: cancelColor}\" @click.stop.prevent=\"handlerCloseModal\">{{ cancelText }}</text>\r\n                        <text class=\"fy-tree-select_bar__btn\" :style=\"{color: confirmColor}\" @click.stop.prevent=\"handlerConfirm\">{{ confirmText }}</text>\r\n                    </template>\r\n                </view>\r\n\r\n\t\t\t\t<view class=\"fy-tree-select_container\" :style=\"{'height': `${height}px`}\">\r\n\t\t\t\t\t<template v-for=\"(column, columnIndex) in treeList\">\r\n\t\t\t\t\t\t<scroll-view :scroll-y=\"true\" :key=\"columnIndex\" :ref=\"`fy-tree-select_column_${columnIndex}`\"\r\n\t\t\t\t\t\t\t:class=\"['fy-tree-select_column', `fy-tree-select_column_${columnIndex}`]\"\r\n\t\t\t\t\t\t\t:style=\"{'height': `${height}px`}\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<template v-for=\"(item, index) in column\">\r\n\t\t\t\t\t\t\t\t<view\r\n\t\t\t\t\t\t\t\t\tv-if=\"treePosition[columnIndex]\" :class=\"['fy-tree-select_item']\" :key=\"index\"\r\n\t\t\t\t\t\t\t\t\t@click.stop.prevent=\"onChange(columnIndex, index)\"\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t<text\r\n\t\t\t\t\t\t\t\t\t\t:style=\"{\r\n\t\t\t\t\t\t\t\t\t\t\t'height': `${itemHeight}px`,\r\n\t\t\t\t\t\t\t\t\t\t\t'line-height': `${itemHeight}px`,\r\n\t\t\t\t\t\t\t\t\t\t\t'font-size': `${fontSize}rpx`,\r\n\t\t\t\t\t\t\t\t\t\t\t'color': index == treePosition[columnIndex]['index'] ? activeColor : color\r\n\t\t\t\t\t\t\t\t\t\t}\"\r\n\t\t\t\t\t\t\t\t\t\tclass=\"fy-tree-select_item_text\"\r\n\t\t\t\t\t\t\t\t\t>{{ item[label] }}</text>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t</template>\r\n\t\t\t\t\t\t\t<view class=\"fy-tree-select_item\" :style=\"{height: `${itemHeight}px`, 'border-top-width': '0px'}\"></view>\r\n\t\t\t\t\t\t</scroll-view>\r\n\t\t\t\t\t</template>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</uni-transition>\r\n\t  </view>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n\tname: \"FyTreeSelect\",\r\n\tprops: {\r\n\t\tvalue: { type: Array, default() { return [] } }, // 默认值\r\n\t\tcolumns: { type: Number, default: 3 }, // 展示数据的列数, 可取值 1, 2, 3, 5\r\n\r\n\t\tcloseOnClickMask: { type: Boolean, default: true }, // 点击遮罩是否关闭菜单\r\n\r\n\t\tshowBar: { type: Boolean, default: true }, // 是否显示操作栏\r\n        customBarStyle: { type: Object, default() { return {} } }, // 是否自定义操纵栏样式\r\n\t\tcancelText: { type: String, default: '取消' }, // 取消按钮文案\r\n\t\tconfirmText: { type: String, default: '确定' }, // 确认按钮文案\r\n\t\tcancelColor: { type: String, default: '#666666' }, // 取消按钮颜色\r\n\t\tconfirmColor: { type: String, default: '#4cd964' }, // 确定按钮颜色\r\n\r\n\t\toptions: { type: Array, default() { return [] } }, // 展示数据\r\n\t\theight: { type: Number, default: 300 }, // 滚动列表的高度，超出将滚动显示\r\n\t\titemHeight: { type: Number, default: 43 }, // 每个的高度 单位px\r\n\t\tduration:  { type: Number, default: 300 },\r\n\r\n\t\tchildren: { type: String, default: 'children' }, // 指定子树为节点对象的某个属性值\r\n\t\tlabel: { type: String, default: 'label' }, // 指定节点标签为节点对象的某个属性值\r\n\t\tprimary: { type: String, default: 'id' }, // 指定节点唯一标识为节点对象的某个属性值\r\n\t\toptionsKey: { type: String, default: 'value' }, // 指定选中值位节点对象的某个属性值\r\n\r\n\t\tcustomChild: { type: Boolean, default: false }, // 是否是自定义子栏目更新\r\n\r\n\t\tfontSize: { type: Number, default: 30 }, // 字体大小，单位rpx\r\n\t\tcolor: { type: String, default: '#3F3F3F' }, // 每项字体颜色\r\n\t\tactiveColor: { type: String, default: '#4cd964' }, // 选中的每项字体颜色\r\n\t},\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tmaskClass: { // 遮罩层样式\r\n                'position': 'fixed', 'bottom': 0, 'top': 0, 'left': 0, 'right': 0, 'backgroundColor': 'rgba(0, 0, 0, 0.6)', 'z-index': '999999',\r\n            },\r\n            transClass: { // 内容弹框样式\r\n                'position': 'fixed', 'left': 0, 'right': 0, 'bottom': 0, 'z-index': '999999',\r\n            },\r\n\r\n\t\t\tvisible: false,\r\n\t\t\ttreeList: [], // 列表数据\r\n\t\t\ttreePosition: [],\r\n\t\t}\r\n\t},\r\n\twatch: {\r\n\t\tvisible: {\r\n\t\t\timmediate: true,\r\n\t\t\thandler: function(val) {\r\n\t\t\t\tif (val && this.treeList.length === 0) {\r\n\t\t\t\t\tthis.updateData(this.options)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tcreated() {\r\n\t\tthis.init();\r\n\t},\r\n\tmethods: {\r\n\t\t// 初始化处理数据展示\r\n\t\tinit() {\r\n\t\t\ttry {\r\n\t\t\t\tconst columns = this.columns;\r\n\t\t\t\tlet index = 0;\r\n\t\t\t\twhile (index < columns) {\r\n\t\t\t\t\tif (index === columns-1) {\r\n\t\t\t\t\t\tthis.$set(this.treePosition, index, { index: -1 });\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.$set(this.treePosition, index, { index: 0 });\r\n\t\t\t\t\t}\r\n\t\t\t\t\tindex += 1;\r\n\t\t\t\t}\r\n\t\t\t} catch(err) {\r\n\t\t\t\tconsole.log(err)\r\n\t\t\t}\r\n\t\t},\r\n\t\t// 组装更新数据\r\n\t\tupdateData(data) {\r\n\t\t\ttry {\r\n\t\t\t\tconst tempArray = [];\r\n\t\t\t\tlet options = this.toJSON(data);\r\n\r\n\t\t\t\tif (options.length === 0) {\r\n\t\t\t\t\treturn this.treeList = [];\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfor (let i = 0; i < this.columns; i++) {\r\n\t\t\t\t\tif (i === 0) {\r\n\t\t\t\t\t\ttempArray[0] = options;\r\n\t\t\t\t\t} else if (this.treePosition[i-1]) {\r\n\t\t\t\t\t\ttempArray[i] = this.getColumnData({ data: tempArray[i-1], index: this.treePosition[i-1]['index'] })\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.treeList = this.toJSON(tempArray);\r\n\r\n\t\t\t\tif (Array.isArray(this.value) && this.value.length > 0) {\r\n\t\t\t\t\tthis.setDefaultData();\r\n\t\t\t\t}\r\n\t\t\t} catch(err) {\r\n\t\t\t\tconsole.log(err);\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 组件默认值(初始化从父组件传进来的)\r\n\t\t*/\r\n\t\tsetDefaultData() {\r\n\t\t\ttry {\r\n\t\t\t\tconst { treeList, value, columns, optionsKey } = this;\r\n\r\n\t\t\t\tfor (let i = 0; i < columns; i++) {\r\n\t\t\t\t\tconst columnList = treeList[i];\r\n\t\t\t\t\tif (!columnList || !Array.isArray(columnList) || columnList.length === 0) break;\r\n\r\n\t\t\t\t\tconst len = columnList.length;\r\n\r\n\t\t\t\t\tif (value[i] !== 0 && !value[i]) {\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tfor (let k = 0; k < len; k++) {\r\n\t\t\t\t\t\tconst item = columnList[k];\r\n\t\t\t\t\t\tif (item[optionsKey] == value[i]) {\r\n\t\t\t\t\t\t\tthis.$set(this.treePosition, i, { index: k }); break;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t} catch(err) {\r\n\t\t\t\tconsole.log(err);\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * @param {number} column - 代表的列数(0, 1, 2);\r\n\t\t * @param {number} index - 当前列表，滚动到的行数索引\r\n\t\t */\r\n\t\tonChange(column, index) {\r\n\t\t\ttry {\r\n\t\t\t\tconst currentColumn = this.treeList[column]; // 当前列的数据\r\n\t\t\t\tconst oldItem = currentColumn[this.treePosition[column].index]; // 存储列的数据\r\n\t\t\t\tconst colLen = this.treeList.length; // 旧数据的长度\r\n\r\n\t\t\t\tif (index === this.treePosition[column].index && !this.customChild) return;\r\n\t\t\t\tthis.setPosAttr(column, 'index', index); // 更新选中列的下标\r\n\r\n\t\t\t\tconst newItem = currentColumn[index];\r\n\t\t\t\t\r\n\t\t\t\tconst resultData = { current: this.toJSON(newItem), prev: this.toJSON(oldItem), column, index };\r\n\t\t\t\tconst SelectData = this.getColumnSelectData() || {};\r\n\t\t\t\tthis.$emit('change', Object.assign({}, resultData, SelectData))\r\n\r\n\t\t\t\tif (this.customChild === true) { // 自定义更新\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// 依次更新后面列的数据\r\n\t\t\t\tfor (let i = column+1; i < this.columns; i++) {\r\n\t\t\t\t\tthis.resetColumn(i);\r\n\t\t\t\t\tthis.$set(this.treeList, i, this.getColumnData({ data: this.treeList[i-1], index: this.treePosition[i - 1].index }))\r\n\t\t\t\t}\r\n\t\t\t} catch(err) { console.log(err) }\r\n\t\t},\r\n\t\t/**\r\n\t\t * 提取每列选中的数据\r\n\t\t*/\r\n\t\tgetColumnSelectData() {\r\n\t\t\ttry {\r\n\t\t\t\tconst data = this.treeList;\r\n\t\t\t\tconst columns = data.length;\r\n\t\t\t\tconst treePosition = this.treePosition;\r\n\t\t\t\tconst selected = [];\r\n\r\n\t\t\t\tlet index = 0;\r\n\t\t\t\twhile (index < columns) {\r\n\t\t\t\t\tif (treePosition[index]['index'] > -1) {\r\n\t\t\t\t\t\tconst item = data[index][treePosition[index]['index']];\r\n\t\t\t\t\t\tselected.push(item);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tselected.push(null);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tindex += 1;\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn { selected: JSON.parse(JSON.stringify(selected)) };\r\n\t\t\t} catch(err) {\r\n\t\t\t\tconsole.log(err)\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 更新指定列的数据（供外部调用）\r\n\t\t * @param { Array } data 更新的数据\r\n\t\t * @param { Number } columnIndex 更新的列\r\n\t\t*/\r\n\t\tupdateColumnData(data = [], columnIndex = 0) {\r\n\t\t\ttry {\r\n\t\t\t\tthis.treeList.splice(columnIndex, 1, this.toJSON(data));\r\n\t\t\t\tthis.resetColumn(columnIndex);\r\n\t\t\t\t// 依次更新后面列的数据\r\n\t\t\t\tfor (let i = columnIndex+1; i < this.columns; i++) {\r\n\t\t\t\t\tthis.resetColumn(i);\r\n\t\t\t\t\tthis.$set(this.treeList, i, this.getColumnData({ data: this.treeList[i-1], index: this.treePosition[i-1].index }))\r\n\t\t\t\t}\r\n\t\t\t} catch(err) {\r\n\t\t\t\tconsole.log(err);\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 获取列的数据\r\n\t\t * @param { Array } data\r\n\t\t * @param {number} index - 当前的列表下标\r\n\t\t*/\r\n\t\tgetColumnData({ data, index }) {\r\n\t\t\ttry {\r\n\t\t\t\treturn data[index] ? data[index][this.children] || [] : [];\r\n\t\t\t} catch(err) {\r\n\t\t\t\tconsole.log(err);\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * @param {number} column - 当前的列数\r\n\t\t **/\r\n\t\tresetColumn(column) {\r\n\t\t\tthis.$set(this.treePosition, column, { index: column == this.columns - 1 ? -1 : 0 });\r\n\t\t},\r\n\t\t/**\r\n\t\t * 深度拷贝对象\r\n\t\t*/\r\n\t\ttoJSON(data) {\r\n\t\t\tif (typeof data === 'object') {\r\n\t\t\t\treturn JSON.parse(JSON.stringify(data));\r\n\t\t\t} else {\r\n\t\t\t\treturn {}\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 更新选中列的下标\r\n\t\t * @param { Number } index // 第几列\r\n\t\t * @param { String } attr // 列的属性\r\n\t\t * @param { any } val // 属性值\r\n\t\t*/\r\n\t\tsetPosAttr(index, attr, val) {\r\n\t\t\ttry {\r\n\t\t\t\tthis.$set(this.treePosition[index], attr, val)\r\n\t\t\t} catch(err) {\r\n\t\t\t\tconsole.log(err);\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 点击确认按钮\r\n\t\t*/\r\n\t\thandlerConfirm() {\r\n\t\t\ttry {\r\n\t\t\t\tconst data = this.treeList;\r\n\t\t\t\tconst columns = this.columns;\r\n\t\t\t\tconst treePosition = this.treePosition;\r\n\t\t\t\tconst selected = [];\r\n\r\n\t\t\t\tlet index = 0;\r\n\t\t\t\tlet values = [];\r\n\t\t\t\tlet primary = [];\r\n\t\t\t\twhile (index < columns) {\r\n\t\t\t\t\tconst curPosition = treePosition[index];\r\n\t\t\t\t\tconst item = data[index][curPosition.index] || {};\r\n\t\t\t\t\tvalues.push(item[this.optionsKey]);\r\n\t\t\t\t\tprimary.push(item[this.primary]);\r\n\t\t\t\t\tselected.push(item || null);\r\n\t\t\t\t\tindex += 1;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.$emit('confirm', { primary, values, selected: this.toJSON(selected) })\r\n\t\t\t\tthis.$emit('input', values)\r\n\t\t\t\tthis.handlerCloseModal();\r\n\t\t\t} catch(err) {\r\n\t\t\t\tconsole.log(err);\r\n\t\t\t}\r\n\t\t},\r\n\t\t// 点击遮罩\r\n\t\thandlerMaskClick() {\r\n\t\t\t// 如果不允许点击遮罩，直接返回\r\n\t\t\tif (!this.closeOnClickMask) return;\r\n\t\t\tthis.handlerCloseModal();\r\n\t\t},\r\n\t\t/**\r\n\t\t * 隐藏模态框\r\n\t\t*/\r\n\t\thandlerCloseModal() {\r\n\t\t\tthis.visible = false;\r\n\t\t\tthis.$emit('close', { visible: false });\r\n\t\t},\r\n\t\t/**\r\n\t\t * 显示模态框\r\n\t\t*/\r\n\t\thandlerOpenModal() {\r\n\t\t\tthis.visible = true;\r\n\t\t\tthis.$emit('open', { visible: true });\r\n\t\t},\r\n\t}\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n@import './fy-tree-select.scss';\r\n</style>\r\n","import mod from \"-!../../../../DCBrowserDownloads/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../DCBrowserDownloads/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../DCBrowserDownloads/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../DCBrowserDownloads/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../DCBrowserDownloads/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../DCBrowserDownloads/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../DCBrowserDownloads/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../DCBrowserDownloads/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../DCBrowserDownloads/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./fy-tree-select.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../../../DCBrowserDownloads/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../DCBrowserDownloads/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../DCBrowserDownloads/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../DCBrowserDownloads/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../DCBrowserDownloads/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../DCBrowserDownloads/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../DCBrowserDownloads/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../DCBrowserDownloads/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../DCBrowserDownloads/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./fy-tree-select.vue?vue&type=style&index=0&lang=scss&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1647938239440\n      var cssReload = require(\"D:/DCBrowserDownloads/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}